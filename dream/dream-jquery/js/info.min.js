function initMap(){createMap(),setMapEvent(),addMapControl(),addMarker(),addPolyline()}function createMap(){var n=new BMap.Map("dituContent"),e=new BMap.Point(118.789378,32.024073);n.centerAndZoom(e,17),window.map=n}function setMapEvent(){map.enableDragging(),map.enableScrollWheelZoom(),map.enableDoubleClickZoom(),map.enableKeyboard()}function addMapControl(){var n=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});map.addControl(n);var e=new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:1});map.addControl(e);var o=new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});map.addControl(o)}function addMarker(){for(var n=0;n<markerArr.length;n++){var e=markerArr[n],o=e.point.split("|")[0],t=e.point.split("|")[1],a=new BMap.Point(o,t),i=createIcon(e.icon),r=new BMap.Marker(a,{icon:i}),l=(createInfoWindow(n),new BMap.Label(e.title,{offset:new BMap.Size(e.icon.lb-e.icon.x+10,0)}));r.setLabel(l),map.addOverlay(r),l.setStyle({borderColor:"#808080",color:"#333",cursor:"pointer"}),function(){var o=createInfoWindow(n),t=r;t.addEventListener("click",function(){this.openInfoWindow(o)}),o.addEventListener("open",function(){t.getLabel().hide()}),o.addEventListener("close",function(){t.getLabel().show()}),l.addEventListener("click",function(){t.openInfoWindow(o)}),e.isOpen&&(l.hide(),t.openInfoWindow(o))}()}}function createInfoWindow(n){var e=markerArr[n];return new BMap.InfoWindow("<b class='iw_poi_title' title='"+e.title+"'>"+e.title+"</b><div class='iw_poi_content'>"+e.content+"</div>")}function createIcon(n){return new BMap.Icon("wz/img/favicon.ico",new BMap.Size(n.w,n.h),{imageOffset:new BMap.Size(-n.l,-n.t),infoWindowOffset:new BMap.Size(n.lb+5,1),offset:new BMap.Size(n.x,n.h)})}function addPolyline(){for(var n=0;n<plPoints.length;n++){for(var e=plPoints[n],o=[],t=0;t<e.points.length;t++){var a=e.points[t].split("|")[0],i=e.points[t].split("|")[1];o.push(new BMap.Point(a,i))}var r=new BMap.Polyline(o,{strokeStyle:e.style,strokeWeight:e.weight,strokeColor:e.color,strokeOpacity:e.opacity});map.addOverlay(r)}}var markerArr=[{title:"集梦传媒",content:"江苏科技创业大厦7楼703室",point:"118.789378|32.024073",isOpen:0,icon:{w:0,h:0,l:0,t:0,x:0,lb:0}}],plPoints=[{style:"solid",weight:4,color:"#f00",opacity:.6,points:["118.787815|32.027976","118.787042|32.025557","118.789935|32.024853","118.789666|32.024027","118.789648|32.024011"]}];initMap();